@tailwind base;
@tailwind components;
@tailwind utilities;

/* Base styles */
@layer base {
  html {
    @apply scroll-smooth;
    /* Prevent horizontal overflow */
    overflow-x: hidden;
  }
  
  body {
    @apply font-body text-gray-700 bg-background antialiased;
    /* Prevent horizontal overflow */
    overflow-x: hidden;
    max-width: 100vw;
  }
  
  h1, h2, h3, h4, h5, h6 {
    @apply font-display;
  }

  /* Ensure images don't overflow */
  img {
    max-width: 100%;
    height: auto;
  }

  /* High contrast focus ring for accessibility */
  :focus-visible {
    outline: 3px solid #8B5CF6;
    outline-offset: 2px;
  }

  /* Remove default outline, use ring instead */
  button:focus:not(:focus-visible),
  a:focus:not(:focus-visible),
  input:focus:not(:focus-visible),
  select:focus:not(:focus-visible),
  textarea:focus:not(:focus-visible) {
    outline: none;
  }

  /* Remove default button styles */
  button {
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2;
  }
}

/* Component styles */
@layer components {
  /* Card base style */
  .card {
    @apply bg-white rounded-xl shadow-card transition-shadow duration-200;
  }
  
  .card-interactive {
    @apply card hover:shadow-card-hover cursor-pointer;
  }

  /* Button variants */
  .btn {
    @apply inline-flex items-center justify-center font-semibold rounded-lg 
           min-h-touch min-w-touch px-6 py-3
           transition-all duration-200 
           disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-primary {
    @apply btn bg-primary text-white 
           hover:bg-primary-hover 
           active:scale-[0.98];
  }

  .btn-secondary {
    @apply btn bg-white text-primary border-2 border-primary 
           hover:bg-primary-light 
           active:scale-[0.98];
  }

  .btn-ghost {
    @apply btn bg-transparent text-gray-600 
           hover:bg-gray-100 
           active:scale-[0.98];
  }

  /* Input base */
  .input {
    @apply w-full px-4 py-3 rounded-lg border border-gray-200 
           font-body text-base text-gray-700
           placeholder:text-gray-400
           focus:border-primary focus:ring-2 focus:ring-primary-light focus:outline-none
           transition-colors duration-200;
  }

  .input-error {
    @apply input border-error focus:border-error focus:ring-red-100;
  }

  /* Label */
  .label {
    @apply block text-sm font-semibold text-gray-600 mb-2;
  }

  /* Error message */
  .error-message {
    @apply text-sm text-error mt-1;
  }

  /* Loading skeleton */
  .skeleton {
    @apply bg-gray-200 rounded animate-pulse;
  }

  /* Badge */
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }

  .badge-sold-out {
    @apply badge bg-gray-100 text-gray-600;
  }

  .badge-new {
    @apply badge bg-accent-light text-accent-500;
  }
}

/* Utility styles */
@layer utilities {
  /* Touch-friendly tap target */
  .touch-target {
    @apply min-h-touch min-w-touch;
  }

  /* Hide scrollbar but allow scrolling */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Text balance for headings */
  .text-balance {
    text-wrap: balance;
  }

  /* Safe area padding for mobile (iPhone notch, etc.) */
  .safe-area-inset-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0);
  }

  .safe-area-inset-top {
    padding-top: env(safe-area-inset-top, 0);
  }

  /* Screen reader only - visually hidden but accessible */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Show element on focus (for skip links) */
  .sr-only-focusable:focus,
  .sr-only-focusable:focus-visible {
    position: static;
    width: auto;
    height: auto;
    padding: inherit;
    margin: inherit;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }
}

/* Custom animations */
@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.skeleton-shimmer {
  background: linear-gradient(
    90deg,
    theme('colors.gray.200') 0%,
    theme('colors.gray.100') 50%,
    theme('colors.gray.200') 100%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}
